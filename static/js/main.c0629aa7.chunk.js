(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{12:function(e,t,r){e.exports={burger_constructor__main_list:"burger-constructor_burger_constructor__main_list__E__kw",burger_constructor__main_list_item:"burger-constructor_burger_constructor__main_list_item__1lDC3",burger_constructor__draggable_list:"burger-constructor_burger_constructor__draggable_list__2oMLz",burger_constructor__draggable_list_item:"burger-constructor_burger_constructor__draggable_list_item__3IoEM",burger_constructor__order_details:"burger-constructor_burger_constructor__order_details__3ahtJ"}},13:function(e,t,r){e.exports={ingredient__container:"ingredient-details_ingredient__container__8HJfc",ingredient__img:"ingredient-details_ingredient__img__27Lmf",ingredient__info:"ingredient-details_ingredient__info__2yiSb",ingredient__element:"ingredient-details_ingredient__element__3G2NB"}},154:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(24),c=r.n(i),s=(r(74),r(45)),_=r.n(s),d=r(67),l=r(9),o=r(11),u=r(25),m=r.n(u);var j=r(16),b=r.n(j),p=r(26),g=r.n(p),x=r(0);function h(e){return Object(x.jsx)("div",{className:"pl-5 pr-5 pt-4 pb-4 mt-4 mb-4 mr-2",children:Object(x.jsxs)("div",{className:g.a.menu_item__link,children:[Object(x.jsx)("div",{className:"mr-2",children:e.icon}),Object(x.jsx)("a",{className:e.active?g.a.menu_item__link_style_active:g.a.menu_item__link_style_unactive,href:e.link,title:e.text,children:Object(x.jsx)("p",{className:"text text_type_main-default",children:e.text})})]})})}var O=r(5);function f(){return Object(x.jsx)("header",{children:Object(x.jsx)("nav",{className:b.a.appheader,children:Object(x.jsxs)("ul",{className:b.a.appheader__menu_list,children:[Object(x.jsx)("li",{className:b.a.appheader__menu_item_left,children:Object(x.jsx)(h,{icon:Object(x.jsx)(O.BurgerIcon,{type:"primary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",link:"#1",active:!0})}),Object(x.jsx)("li",{className:b.a.appheader__menu_item_left,children:Object(x.jsx)(h,{icon:Object(x.jsx)(O.ListIcon,{type:"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"#2"})}),Object(x.jsx)("li",{className:b.a.appheader__menu_item_center,children:Object(x.jsx)(O.Logo,{})}),Object(x.jsx)("li",{className:b.a.appheader__menu_item_right,children:Object(x.jsx)(h,{icon:Object(x.jsx)(O.ProfileIcon,{type:"secondary"}),text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",link:"#3"})})]})})})}var v=r(12),y=r.n(v),N=Object(n.createContext)();function k(e){var t=e.doOrder,r=a.a.useContext(N),n=r.find((function(e){return"bun"===e.type})),i=r.filter((function(e){return"bun"!==e.type})),c=n?2*n.price:0,s=i?i.reduce((function(e,t){return e+t.price}),0):0;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("ul",{className:y.a.burger_constructor__main_list,children:[n&&Object(x.jsx)("li",{className:y.a.burger_constructor__main_list_item,children:Object(x.jsx)(O.ConstructorElement,{type:"top",isLocked:!0,text:n.name+" (\u0432\u0435\u0440\u0445)",thumbnail:n.image,price:n.price})},"top_bun"),Object(x.jsx)("li",{className:y.a.burger_constructor__main_list_item,children:i&&Object(x.jsx)("ul",{className:y.a.burger_constructor__draggable_list,children:i.map((function(e,t){return Object(x.jsxs)("li",{className:y.a.burger_constructor__draggable_list_item,children:[Object(x.jsx)(O.DragIcon,{type:"primary"}),Object(x.jsx)(O.ConstructorElement,{text:e.name,thumbnail:e.image,price:e.price,id:e._id})]},e._id+"_"+t)}))},"middle_items")}),n&&Object(x.jsx)("li",{className:y.a.burger_constructor__main_list_item,children:Object(x.jsx)(O.ConstructorElement,{isLocked:!0,type:"bottom",text:n.name+" (\u043d\u0438\u0437)",thumbnail:n.image,price:n.price})},"bottom_bun")]}),Object(x.jsxs)("div",{className:y.a.burger_constructor__order_details,children:[Object(x.jsx)("p",{className:"text text_type_digits-medium",children:c+s}),Object(x.jsx)("span",{className:"ml-2 mr-10",children:Object(x.jsx)(O.CurrencyIcon,{type:"primary"})}),Object(x.jsx)(O.Button,{type:"primary",size:"medium",onClick:t,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})}var C=r(46),R=r.n(C),M=r(2),q=r.n(M),L=q.a.shape({name:q.a.string.isRequired,price:q.a.number.isRequired,image:q.a.string.isRequired,value:q.a.number.isRequired,__v:q.a.number.isRequired,_id:q.a.string.isRequired}),I=r(68),T=r.n(I),E=r(27),w=r.n(E);function S(e){var t=e.name,r=e.id,n=e.image,a=e.price,i=e.value,c=e.openModal;return Object(x.jsxs)("li",{className:w.a.burgeringredients_card,onClick:function(){c({modalType:"ingredientDetail",itemId:r})},children:[i?Object(x.jsx)(O.Counter,{count:i}):null,Object(x.jsx)("img",{src:n,alt:t,title:t,className:"ml-4 mr-4"}),Object(x.jsxs)("div",{className:w.a.burgeringredients_card__ingredient_price,children:[Object(x.jsx)("p",{className:"pr-2 text text_type_digits-default",children:a}),Object(x.jsx)(O.CurrencyIcon,{})]}),Object(x.jsx)("p",{className:w.a.burgeringredients_card__ingredient_name+" text text_type_main-default",children:t})]})}q.a.shape({name:q.a.string.isRequired,price:q.a.number.isRequired,image:q.a.string.isRequired,value:q.a.number.isRequired,openModal:q.a.func.isRequired});var B=a.a.forwardRef((function(e,t){var r=e.heading,n=e.items,a=e.openModal;return Object(x.jsxs)("section",{ref:t,children:[Object(x.jsx)("h2",{className:"text text_type_main-medium mt-10 mb-6",children:r}),Object(x.jsx)("ul",{className:T.a.burger_ingredients_list+" ml-4 mt-6 mr-2 mb-10",children:n.map((function(e){return Object(x.jsx)(S,{openModal:a,name:e.name,id:e._id,price:e.price,image:e.image,value:e.__v},e._id)}))})]})}));q.a.shape({heading:q.a.string.isRequired,items:L,openModal:q.a.func.isRequired});function D(e){var t=e.openModal,r=e.items,n=a.a.useState("bun"),i=Object(o.a)(n,2),c=i[0],s=i[1],_=a.a.useRef(null),d=a.a.useRef(null),l=a.a.useRef(null);function u(e){e&&e.scrollIntoView()}return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"text text_type_main-large mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(x.jsxs)("div",{className:R.a.burgeringredients__tab_selector,children:[Object(x.jsx)(O.Tab,{value:"bun",active:"bun"===c,onClick:function(e){s(e),u(_.current)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(x.jsx)(O.Tab,{value:"sauce",active:"sauce"===c,onClick:function(e){s(e),u(d.current)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(x.jsx)(O.Tab,{value:"main",active:"main"===c,onClick:function(e){s(e),u(l.current)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(x.jsxs)("div",{className:R.a.burgeringredients__scroll_container,children:[Object(x.jsx)(B,{ref:_,heading:"\u0411\u0443\u043b\u043a\u0438",openModal:t,items:r.filter((function(e){return"bun"===e.type}))}),Object(x.jsx)(B,{ref:d,heading:"\u0421\u043e\u0443\u0441\u044b",openModal:t,items:r.filter((function(e){return"sauce"===e.type}))}),Object(x.jsx)(B,{ref:l,heading:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",openModal:t,items:r.filter((function(e){return"main"===e.type}))})]})]})}var P=r.p+"static/media/done.3ba9e5cd.svg",F=r(19),J=r.n(F),K=Object(n.createContext)();function G(){var e=a.a.useContext(K),t=e.result,r=e.isLoading,n=e.error;return Object(x.jsxs)(x.Fragment,{children:[r&&Object(x.jsx)("span",{className:"".concat((J.a.order__container,J.a.order__loading)," text text_type_main-default mb-8"),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),!r&&!n&&t&&Object(x.jsxs)("div",{className:"".concat(J.a.order__container," pt-30 pb-25"),children:[Object(x.jsx)("div",{className:"mb-8",children:Object(x.jsx)("p",{className:"".concat(J.a.order__digitdecor," text text_type_digits-large"),children:t.order.number})}),Object(x.jsx)("p",{className:"text text_type_main-medium",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(x.jsx)("img",{className:"".concat(J.a.order__img," mb-15 mt-15"),alt:"\u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:P}),Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(x.jsx)("div",{className:"mt-2",children:Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})})]})]})}var H=r(13),z=r.n(H);var U=function(e){var t=e.name,r=e.image,n=e.calories,a=e.fat,i=e.proteins,c=e.carbohydrates;return Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__container," p-10"),children:[Object(x.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(x.jsx)("img",{className:"".concat(z.a.ingredient__img),alt:"\u0432\u0430\u0448 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442",src:r}),Object(x.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__info," mt-8 text_color_inactive"),children:[Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:n})]}),Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:i})]}),Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:a})]}),Object(x.jsxs)("div",{className:"".concat(z.a.ingredient__element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:c})]})]})]})},X=r(47),A=r.n(X),Q=r(69),V=r.n(Q),Y=function(e){var t=e.children,r=e.onClick;return Object(x.jsx)("div",{className:V.a.overlay,onClick:r,children:t})},Z=(q.a.shape({onClick:q.a.func.isRequired,children:q.a.element.isRequired}),function(e){var t=e.closeModal,r=e.children;a.a.useEffect((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]);return Object(i.createPortal)(Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Y,{onClick:function(e){e.target===e.currentTarget&&t()},children:Object(x.jsxs)("div",{className:A.a.modal__space,children:[Object(x.jsx)("div",{className:A.a.modal__close_icon,children:Object(x.jsx)(O.CloseIcon,{type:"primary",onClick:t})}),r]})})}),document.getElementById("modal-root"))});q.a.shape({closeModal:q.a.func.isRequired,children:q.a.element.isRequired});function W(){var e=a.a.useState({isLoading:!1,hasError:!1,error:"",data:[]}),t=Object(o.a)(e,2),r=t[0],n=t[1];a.a.useEffect((function(){fetch("".concat("https://norma.nomoreparties.space/api/ingredients")).then((function(e){return function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," - ").concat(e.statusText))}(e)})).then((function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!0,data:e.data})}))})).catch((function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!1,hasError:!0,error:e})}))}))}),[]);var i=a.a.useState(!1),c=Object(o.a)(i,2),s=c[0],u=c[1],j=a.a.useState(!1),b=Object(o.a)(j,2),p=b[0],g=b[1],h=a.a.useState({data:null}),O=Object(o.a)(h,2),v=O[0],y=O[1];function C(e){var t=e.modalType,n=e.itemId,a=null;"ingredientDetail"===t?(g(!0),a=r.data.find((function(e){return e._id===n})),y({data:a})):"orderDetail"===t&&u(!0)}function R(){u(!1),g(!1)}var M=r.data;console.log(M);var q=a.a.useState({result:null,isLoading:!1,error:null}),L=Object(o.a)(q,2),I=L[0],T=L[1];console.log("answer0: ",I);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f,{}),Object(x.jsxs)("main",{className:m.a.container,children:[Object(x.jsx)("section",{className:m.a.container_left+" mr-5",children:Object(x.jsx)(D,{items:r.data,openModal:C})}),Object(x.jsx)("section",{className:m.a.container_right+" ml-5",children:Object(x.jsx)(N.Provider,{value:M,children:Object(x.jsx)(k,{items:r.data,doOrder:function(){var e=M.find((function(e){return"bun"===e.type?e:0}))._id,t=M.filter((function(e){return"bun"!=e.type})).map((function(e){return e._id})).concat(e,e),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:t})};Object(d.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!0})),e.next=4,fetch("https://norma.nomoreparties.space/api/orders",r);case 4:if(!(t=e.sent).ok){e.next=12;break}return e.next=8,t.json();case 8:n=e.sent,T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!1,result:n})),e.next=13;break;case 12:return e.abrupt("return",Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status," - ").concat(t.statusText)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!1,error:e.t0}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))(),C({modalType:"orderDetail"})},openModal:C})})})]}),p&&Object(x.jsx)(Z,{closeModal:R,children:Object(x.jsx)(U,{image:v.data.image,name:v.data.name,calories:v.data.calories,fat:v.data.fat,proteins:v.data.proteins,carbohydrates:v.data.carbohydrates})}),Object(x.jsx)(K.Provider,{value:I,children:s&&Object(x.jsx)(Z,{closeModal:R,children:Object(x.jsx)(G,{})})})]})}c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(W,{})}),document.getElementById("root"))},16:function(e,t,r){e.exports={appheader:"app-header_appheader__3TnN2",appheader__menu_list:"app-header_appheader__menu_list__3LK_X",appheader__menu_item_left:"app-header_appheader__menu_item_left__1F4IX",appheader__menu_item_center:"app-header_appheader__menu_item_center__hKKRx",appheader__menu_item_right:"app-header_appheader__menu_item_right__rTD0n"}},19:function(e,t,r){e.exports={order__container:"order-details_order__container__2tlqp",order__img:"order-details_order__img__gKARh",order__digitdecor:"order-details_order__digitdecor__hRfMx",order__loading:"order-details_order__loading__8YDg-"}},25:function(e,t,r){e.exports={container:"app_container__3oySj",container_left:"app_container_left__2BdKF",container_right:"app_container_right__3mMa8"}},26:function(e,t,r){e.exports={menu_item__link:"menu-item_menu_item__link__7BC_U",menu_item__link_style_unactive:"menu-item_menu_item__link_style_unactive__1g--Z",menu_item__link_style_active:"menu-item_menu_item__link_style_active__3HIBp"}},27:function(e,t,r){e.exports={burgeringredients_card:"burger-ingredients-card_burgeringredients_card__36h5k",burgeringredients_card__ingredient_price:"burger-ingredients-card_burgeringredients_card__ingredient_price__1G5Iw",burgeringredients_card__ingredient_name:"burger-ingredients-card_burgeringredients_card__ingredient_name__-GGUT"}},46:function(e,t,r){e.exports={burgeringredients__tab_selector:"burger-ingredients_burgeringredients__tab_selector__2Kr0J",burgeringredients__scroll_container:"burger-ingredients_burgeringredients__scroll_container__HfQOK"}},47:function(e,t,r){e.exports={modal__space:"modal_modal__space__lmCTc",modal__close_icon:"modal_modal__close_icon__8g-C1"}},68:function(e,t,r){e.exports={burger_ingredients_list:"burger-ingredients-category_burger_ingredients_list__2Jwyq"}},69:function(e,t,r){e.exports={overlay:"modal-overlay_overlay__2GbMP"}},74:function(e,t,r){}},[[154,1,2]]]);
//# sourceMappingURL=main.c0629aa7.chunk.js.map