(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{12:function(e,t,r){e.exports={burger_constructor__main_list:"burger-constructor_burger_constructor__main_list__E__kw",burger_constructor__main_list_item:"burger-constructor_burger_constructor__main_list_item__1lDC3",burger_constructor__draggable_list:"burger-constructor_burger_constructor__draggable_list__2oMLz",burger_constructor__draggable_list_item:"burger-constructor_burger_constructor__draggable_list_item__3IoEM",burger_constructor__order_details:"burger-constructor_burger_constructor__order_details__3ahtJ"}},13:function(e,t,r){e.exports={ingredient__container:"ingredient-details_ingredient__container__8HJfc",ingredient__img:"ingredient-details_ingredient__img__27Lmf",ingredient__info:"ingredient-details_ingredient__info__2yiSb",ingredient__element:"ingredient-details_ingredient__element__3G2NB"}},154:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(24),c=r.n(i),s=(r(74),r(45)),_=r.n(s),d=r(67),l=r(9),o=r(11),u=r(25),m=r.n(u),j="https://norma.nomoreparties.space/api";var b=r(16),p=r.n(b),g=r(26),x=r.n(g),h=r(0);function O(e){return Object(h.jsx)("div",{className:"pl-5 pr-5 pt-4 pb-4 mt-4 mb-4 mr-2",children:Object(h.jsxs)("div",{className:x.a.menu_item__link,children:[Object(h.jsx)("div",{className:"mr-2",children:e.icon}),Object(h.jsx)("a",{className:e.active?x.a.menu_item__link_style_active:x.a.menu_item__link_style_unactive,href:e.link,title:e.text,children:Object(h.jsx)("p",{className:"text text_type_main-default",children:e.text})})]})})}var f=r(5);function v(){return Object(h.jsx)("header",{children:Object(h.jsx)("nav",{className:p.a.appheader,children:Object(h.jsxs)("ul",{className:p.a.appheader__menu_list,children:[Object(h.jsx)("li",{className:p.a.appheader__menu_item_left,children:Object(h.jsx)(O,{icon:Object(h.jsx)(f.BurgerIcon,{type:"primary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",link:"#1",active:!0})}),Object(h.jsx)("li",{className:p.a.appheader__menu_item_left,children:Object(h.jsx)(O,{icon:Object(h.jsx)(f.ListIcon,{type:"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430\xa0\u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"#2"})}),Object(h.jsx)("li",{className:p.a.appheader__menu_item_center,children:Object(h.jsx)(f.Logo,{})}),Object(h.jsx)("li",{className:p.a.appheader__menu_item_right,children:Object(h.jsx)(O,{icon:Object(h.jsx)(f.ProfileIcon,{type:"secondary"}),text:"\u041b\u0438\u0447\u043d\u044b\u0439\xa0\u043a\u0430\u0431\u0438\u043d\u0435\u0442",link:"#3"})})]})})})}var y=r(12),N=r.n(y),k=Object(n.createContext)();function C(e){var t=e.doOrder,r=a.a.useContext(k),n=r.find((function(e){return"bun"===e.type})),i=r.filter((function(e){return"bun"!==e.type})),c=n?2*n.price:0,s=i?i.reduce((function(e,t){return e+t.price}),0):0;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("ul",{className:N.a.burger_constructor__main_list,children:[n&&Object(h.jsx)("li",{className:N.a.burger_constructor__main_list_item,children:Object(h.jsx)(f.ConstructorElement,{type:"top",isLocked:!0,text:n.name+" (\u0432\u0435\u0440\u0445)",thumbnail:n.image,price:n.price})},"top_bun"),Object(h.jsx)("li",{className:N.a.burger_constructor__main_list_item,children:i&&Object(h.jsx)("ul",{className:N.a.burger_constructor__draggable_list,children:i.map((function(e,t){return Object(h.jsxs)("li",{className:N.a.burger_constructor__draggable_list_item,children:[Object(h.jsx)(f.DragIcon,{type:"primary"}),Object(h.jsx)(f.ConstructorElement,{text:e.name,thumbnail:e.image,price:e.price,id:e._id})]},e._id+"_"+t)}))},"middle_items")}),n&&Object(h.jsx)("li",{className:N.a.burger_constructor__main_list_item,children:Object(h.jsx)(f.ConstructorElement,{isLocked:!0,type:"bottom",text:n.name+" (\u043d\u0438\u0437)",thumbnail:n.image,price:n.price})},"bottom_bun")]}),Object(h.jsxs)("div",{className:N.a.burger_constructor__order_details,children:[Object(h.jsx)("p",{className:"text text_type_digits-medium",children:c+s}),Object(h.jsx)("span",{className:"ml-2 mr-10",children:Object(h.jsx)(f.CurrencyIcon,{type:"primary"})}),Object(h.jsx)(f.Button,{type:"primary",size:"medium",onClick:t,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})}var R=r(46),M=r.n(R),q=r(2),L=r.n(q),E=L.a.shape({name:L.a.string.isRequired,price:L.a.number.isRequired,image:L.a.string.isRequired,value:L.a.number.isRequired,__v:L.a.number.isRequired,_id:L.a.string.isRequired}),I=r(68),T=r.n(I),w=r(27),S=r.n(w);function B(e){var t=e.name,r=e.id,n=e.image,a=e.price,i=e.value,c=e.openModal;return Object(h.jsxs)("li",{className:S.a.burgeringredients_card,onClick:function(){c({modalType:"ingredientDetail",itemId:r})},children:[i?Object(h.jsx)(f.Counter,{count:i}):null,Object(h.jsx)("img",{src:n,alt:t,title:t,className:"ml-4 mr-4"}),Object(h.jsxs)("div",{className:S.a.burgeringredients_card__ingredient_price,children:[Object(h.jsx)("p",{className:"pr-2 text text_type_digits-default",children:a}),Object(h.jsx)(f.CurrencyIcon,{})]}),Object(h.jsx)("p",{className:S.a.burgeringredients_card__ingredient_name+" text text_type_main-default",children:t})]})}L.a.shape({name:L.a.string.isRequired,price:L.a.number.isRequired,image:L.a.string.isRequired,value:L.a.number.isRequired,openModal:L.a.func.isRequired});var D=a.a.forwardRef((function(e,t){var r=e.heading,n=e.items,a=e.openModal;return Object(h.jsxs)("section",{ref:t,children:[Object(h.jsx)("h2",{className:"text text_type_main-medium mt-10 mb-6",children:r}),Object(h.jsx)("ul",{className:T.a.burger_ingredients_list+" ml-4 mt-6 mr-2 mb-10",children:n.map((function(e){return Object(h.jsx)(B,{openModal:a,name:e.name,id:e._id,price:e.price,image:e.image,value:e.__v},e._id)}))})]})}));L.a.shape({heading:L.a.string.isRequired,items:E,openModal:L.a.func.isRequired});function F(e){var t=e.openModal,r=e.items,n=a.a.useState("bun"),i=Object(o.a)(n,2),c=i[0],s=i[1],_=a.a.useRef(null),d=a.a.useRef(null),l=a.a.useRef(null);function u(e){e&&e.scrollIntoView()}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"text text_type_main-large mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(h.jsxs)("div",{className:M.a.burgeringredients__tab_selector,children:[Object(h.jsx)(f.Tab,{value:"bun",active:"bun"===c,onClick:function(e){s(e),u(_.current)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(h.jsx)(f.Tab,{value:"sauce",active:"sauce"===c,onClick:function(e){s(e),u(d.current)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(h.jsx)(f.Tab,{value:"main",active:"main"===c,onClick:function(e){s(e),u(l.current)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(h.jsxs)("div",{className:M.a.burgeringredients__scroll_container,children:[Object(h.jsx)(D,{ref:_,heading:"\u0411\u0443\u043b\u043a\u0438",openModal:t,items:r.filter((function(e){return"bun"===e.type}))}),Object(h.jsx)(D,{ref:d,heading:"\u0421\u043e\u0443\u0441\u044b",openModal:t,items:r.filter((function(e){return"sauce"===e.type}))}),Object(h.jsx)(D,{ref:l,heading:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",openModal:t,items:r.filter((function(e){return"main"===e.type}))})]})]})}var J=r.p+"static/media/done.3ba9e5cd.svg",K=r(19),P=r.n(K),G=Object(n.createContext)();function H(){var e=a.a.useContext(G),t=e.result,r=e.isLoading,n=e.error;return Object(h.jsxs)(h.Fragment,{children:[r&&Object(h.jsx)("span",{className:"".concat(P.a.order__loading," text text_type_main-default mb-8"),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),!r&&!n&&t&&Object(h.jsxs)("div",{className:"".concat(P.a.order__container," pt-30 pb-25"),children:[Object(h.jsx)("div",{className:"mb-8",children:Object(h.jsx)("p",{className:"".concat(P.a.order__digitdecor," text text_type_digits-large"),children:t.order.number})}),Object(h.jsx)("p",{className:"text text_type_main-medium",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(h.jsx)("img",{className:"".concat(P.a.order__img," mb-15 mt-15"),alt:"\u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:J}),Object(h.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(h.jsx)("div",{className:"mt-2",children:Object(h.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})})]})]})}var z=r(13),U=r.n(z);var X=function(e){var t=e.name,r=e.image,n=e.calories,a=e.fat,i=e.proteins,c=e.carbohydrates;return Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__container," p-10"),children:[Object(h.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(h.jsx)("img",{className:"".concat(U.a.ingredient__img),alt:"\u0432\u0430\u0448 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442",src:r}),Object(h.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__info," mt-8 text_color_inactive"),children:[Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__element," mr-5"),children:[Object(h.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:n})]}),Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__element," mr-5"),children:[Object(h.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:i})]}),Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__element," mr-5"),children:[Object(h.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:a})]}),Object(h.jsxs)("div",{className:"".concat(U.a.ingredient__element," mr-5"),children:[Object(h.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:c})]})]})]})},A=r(47),Q=r.n(A),V=r(69),Y=r.n(V),Z=function(e){var t=e.children,r=e.onClick;return Object(h.jsx)("div",{className:Y.a.overlay,onClick:r,children:t})},W=(L.a.shape({onClick:L.a.func.isRequired,children:L.a.element.isRequired}),function(e){var t=e.closeModal,r=e.children;a.a.useEffect((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]);return Object(i.createPortal)(Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Z,{onClick:function(e){e.target===e.currentTarget&&t()},children:Object(h.jsxs)("div",{className:Q.a.modal__space,children:[Object(h.jsx)("div",{className:Q.a.modal__close_icon,children:Object(h.jsx)(f.CloseIcon,{type:"primary",onClick:t})}),r]})})}),document.getElementById("modal-root"))});L.a.shape({closeModal:L.a.func.isRequired,children:L.a.element.isRequired});function $(){var e=a.a.useState({isLoading:!1,hasError:!1,error:"",data:[]}),t=Object(o.a)(e,2),r=t[0],n=t[1];a.a.useEffect((function(){fetch("".concat(j,"/ingredients")).then((function(e){return function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," - ").concat(e.statusText))}(e)})).then((function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!0,data:e.data})}))})).catch((function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!1,hasError:!0,error:e})}))}))}),[]);var i=a.a.useState(!1),c=Object(o.a)(i,2),s=c[0],u=c[1],b=a.a.useState(!1),p=Object(o.a)(b,2),g=p[0],x=p[1],O=a.a.useState({data:null}),f=Object(o.a)(O,2),y=f[0],N=f[1];function R(e){var t=e.modalType,n=e.itemId,a=null;"ingredientDetail"===t?(x(!0),a=r.data.find((function(e){return e._id===n})),N({data:a})):"orderDetail"===t&&u(!0)}function M(){u(!1),x(!1)}var q=r.data,L=a.a.useState({result:null,isLoading:!1,error:""}),E=Object(o.a)(L,2),I=E[0],T=E[1],w=function(){var e=Object(d.a)(_.a.mark((function e(){var t,r,n,a,i,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.find((function(e){return"bun"===e.type?e:0}))._id,r=q.filter((function(e){return"bun"!==e.type})).map((function(e){return e._id})),n=r.concat(t,t),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:n})},e.prev=4,T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!0})),e.next=8,fetch("".concat(j,"/orders"),a);case 8:if(!(i=e.sent).ok){e.next=16;break}return e.next=12,i.json();case 12:c=e.sent,T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!1,result:c})),e.next=17;break;case 16:throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(i.status));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),T(Object(l.a)(Object(l.a)({},I),{},{isLoading:!1,error:e.t0}));case 22:R({modalType:"orderDetail"});case 23:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{}),Object(h.jsxs)("main",{className:m.a.container,children:[r.hasError&&Object(h.jsx)("div",{children:r.error}),Object(h.jsx)("section",{className:m.a.container_left+" mr-5",children:Object(h.jsx)(F,{items:r.data,openModal:R})}),Object(h.jsx)("section",{className:m.a.container_right+" ml-5",children:Object(h.jsx)(k.Provider,{value:q,children:Object(h.jsx)(C,{doOrder:w})})})]}),g&&Object(h.jsx)(W,{closeModal:M,children:Object(h.jsx)(X,{image:y.data.image,name:y.data.name,calories:y.data.calories,fat:y.data.fat,proteins:y.data.proteins,carbohydrates:y.data.carbohydrates})}),Object(h.jsx)(G.Provider,{value:I,children:s&&Object(h.jsx)(W,{closeModal:M,children:Object(h.jsx)(H,{})})})]})}c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)($,{})}),document.getElementById("root"))},16:function(e,t,r){e.exports={appheader:"app-header_appheader__3TnN2",appheader__menu_list:"app-header_appheader__menu_list__3LK_X",appheader__menu_item_left:"app-header_appheader__menu_item_left__1F4IX",appheader__menu_item_center:"app-header_appheader__menu_item_center__hKKRx",appheader__menu_item_right:"app-header_appheader__menu_item_right__rTD0n"}},19:function(e,t,r){e.exports={order__container:"order-details_order__container__2tlqp",order__img:"order-details_order__img__gKARh",order__digitdecor:"order-details_order__digitdecor__hRfMx",order__loading:"order-details_order__loading__8YDg-"}},25:function(e,t,r){e.exports={container:"app_container__3oySj",container_left:"app_container_left__2BdKF",container_right:"app_container_right__3mMa8"}},26:function(e,t,r){e.exports={menu_item__link:"menu-item_menu_item__link__7BC_U",menu_item__link_style_unactive:"menu-item_menu_item__link_style_unactive__1g--Z",menu_item__link_style_active:"menu-item_menu_item__link_style_active__3HIBp"}},27:function(e,t,r){e.exports={burgeringredients_card:"burger-ingredients-card_burgeringredients_card__36h5k",burgeringredients_card__ingredient_price:"burger-ingredients-card_burgeringredients_card__ingredient_price__1G5Iw",burgeringredients_card__ingredient_name:"burger-ingredients-card_burgeringredients_card__ingredient_name__-GGUT"}},46:function(e,t,r){e.exports={burgeringredients__tab_selector:"burger-ingredients_burgeringredients__tab_selector__2Kr0J",burgeringredients__scroll_container:"burger-ingredients_burgeringredients__scroll_container__HfQOK"}},47:function(e,t,r){e.exports={modal__space:"modal_modal__space__lmCTc",modal__close_icon:"modal_modal__close_icon__8g-C1"}},68:function(e,t,r){e.exports={burger_ingredients_list:"burger-ingredients-category_burger_ingredients_list__2Jwyq"}},69:function(e,t,r){e.exports={overlay:"modal-overlay_overlay__2GbMP"}},74:function(e,t,r){}},[[154,1,2]]]);
//# sourceMappingURL=main.70c7ccfb.chunk.js.map